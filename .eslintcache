[{"E:\\bannerCreator-1\\src\\index.js":"1","E:\\bannerCreator-1\\src\\reportWebVitals.js":"2","E:\\bannerCreator-1\\src\\App.js":"3","E:\\bannerCreator-1\\src\\components\\Preview.js":"4","E:\\bannerCreator-1\\src\\components\\Tools.js":"5","E:\\bannerCreator-1\\src\\components\\tools\\Underlay.js":"6","E:\\bannerCreator-1\\src\\components\\tools\\Destination.js":"7","E:\\bannerCreator-1\\src\\components\\tools\\Buttons.js":"8","E:\\bannerCreator-1\\src\\components\\tools\\Title.js":"9","E:\\bannerCreator-1\\src\\components\\tools\\BannerParametersForm.js":"10","E:\\bannerCreator-1\\src\\components\\tools\\PictureParam.js":"11","E:\\bannerCreator-1\\src\\bll\\exports.js":"12"},{"size":517,"mtime":1607750600761,"results":"13","hashOfConfig":"14"},{"size":375,"mtime":1607750600762,"results":"15","hashOfConfig":"14"},{"size":23113,"mtime":1607897010199,"results":"16","hashOfConfig":"14"},{"size":2668,"mtime":1607895582459,"results":"17","hashOfConfig":"14"},{"size":1635,"mtime":1607750600755,"results":"18","hashOfConfig":"14"},{"size":1230,"mtime":1607750600760,"results":"19","hashOfConfig":"14"},{"size":375,"mtime":1607750600758,"results":"20","hashOfConfig":"14"},{"size":756,"mtime":1607916570898,"results":"21","hashOfConfig":"14"},{"size":1330,"mtime":1607785616813,"results":"22","hashOfConfig":"14"},{"size":2031,"mtime":1607750600757,"results":"23","hashOfConfig":"14"},{"size":888,"mtime":1607785252563,"results":"24","hashOfConfig":"14"},{"size":1579,"mtime":1607879334627,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"1cnaoss",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"28"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52","usedDeprecatedRules":"53"},"E:\\bannerCreator-1\\src\\index.js",[],["54","55"],"E:\\bannerCreator-1\\src\\reportWebVitals.js",[],"E:\\bannerCreator-1\\src\\App.js",[],"E:\\bannerCreator-1\\src\\components\\Preview.js",["56","57","58"],"import React, { useEffect } from \"react\"\r\nimport html2canvas from 'html2canvas'\r\n\r\nexport const Preview = (props) => {\r\n\r\n  const params = props.bannerParams\r\n\r\n  const underlayColorCreator = (data) => {\r\n    const canvas = document.getElementById(\"canvas\")\r\n    let ctx = canvas.getContext(\"2d\")\r\n    if(params.underlayColors && params.underlayColors.length >1) {\r\n      const grad = ctx.createLinearGradient(0, 0, params.bannerSize.width, params.bannerSize.height)\r\n      data.forEach((col, i)=>{return (grad.addColorStop((1 / (data.length-1) * i), col.color))})\r\n      return grad\r\n    } else {\r\n      return params.underlayColors[0]? params.underlayColors[0].color : \"lightgrey\"\r\n    }\r\n  }\r\n  \r\n    let image = new Image()\r\n    image.src = `${params.picture.link}`\r\n    /* image.setAttribute('crossOrigin', 'anonymous')  */\r\n    \r\n    useEffect(()=>{\r\n        const canvas = document.getElementById(\"canvas\")\r\n        let ctx = canvas.getContext(\"2d\")\r\n        ctx.canvas.width = params.bannerSize.width\r\n        ctx.canvas.height = params.bannerSize.height\r\n\r\n        ctx.fillStyle=underlayColorCreator(params.underlayColors)\r\n        ctx.fillRect(0, 0, params.bannerSize.width, params.bannerSize.height)\r\n      \r\n\r\n        image.onload = () => {\r\n          ctx.drawImage(image, params.picture.x, params.picture.y, params.picture.scaleX, params.picture.scaleY)\r\nconsole.log(\"image onloaded\")\r\n        }\r\n\r\n        params.titles.map(param=>{\r\n          ctx.fillStyle=`${param.fontColor}`\r\n          ctx.font=`${param.fontSize}px Arial`\r\n          ctx.fillText(`${param.title}`, param.x, param.y)           \r\n        })\r\n\r\n        \r\n\r\n    },[params])\r\n\r\n    const saveAsPNG = () => {\r\n      \r\n      var canvas = document.getElementById('canvas');\r\n\r\n      canvas.toBlob(function(blob) {\r\n        var newImg = document.createElement('img'),\r\n            url = URL.createObjectURL(blob);\r\n      \r\n        newImg.onload = function() {\r\n          // больше не нужно читать blob, поэтому он отменен\r\n          URL.revokeObjectURL(url);\r\n        };\r\n      \r\n        newImg.src = url;\r\n        document.body.appendChild(newImg);\r\n      });\r\n    }\r\n\r\n    return (\r\n        <div className = \"col pt2\">\r\n            <canvas id=\"canvas\" onMouseDown={e=>props.onMouseDown(e)}\r\n                                onMouseUp={e=>props.onMouseUp(e)}\r\n                                onMouseMove={e=>props.onMouseMove(e)} >Для работы с программой нужно что-то посвежее. Обновите браузер</canvas>\r\n                <button onClick={saveAsPNG}>Сохранить</button>\r\n        </div>\r\n\r\n    )\r\n}","E:\\bannerCreator-1\\src\\components\\Tools.js",[],"E:\\bannerCreator-1\\src\\components\\tools\\Underlay.js",[],"E:\\bannerCreator-1\\src\\components\\tools\\Destination.js",[],"E:\\bannerCreator-1\\src\\components\\tools\\Buttons.js",[],"E:\\bannerCreator-1\\src\\components\\tools\\Title.js",[],"E:\\bannerCreator-1\\src\\components\\tools\\BannerParametersForm.js",[],"E:\\bannerCreator-1\\src\\components\\tools\\PictureParam.js",[],"E:\\bannerCreator-1\\src\\bll\\exports.js",["59","60"],"import React from \"react\"\r\nimport html2canvas from 'html2canvas'\r\n\r\n\r\nexport const copyHTML = (props) => {\r\n    const node = document.getElementById('canvas')\r\n    const copyOfNode = node.outerHTML\r\n    // отправляем разметку в буффер обмена, обернув ее ссылкой на сайт\r\n    navigator.clipboard.writeText(`<a href=${props.destLink} style='display: block; heigth: 100%' target='_blank'>` + copyOfNode + '</a>')\r\n    .then(() => {\r\n        console.log(copyOfNode)\r\n/*       props.showNotification('скопированно в буфер обмена как HTML')\r\n      setTimeout(props.hideNotification, 500) */\r\n    })\r\n    .catch(() => {\r\n/*       props.showNotification('что-то пошло не так')\r\n      setTimeout(props.hideNotification, 500) */\r\n    })\r\n  }\r\n\r\n  export const copySettingsToJSON = (props) => {\r\n    const bannerText = document.getElementById('banner_text').textContent\r\n    const config = {\r\n      ...props.bannerParams,\r\n      textValue: bannerText // добавим в конфигурацию баннера текст\r\n    };\r\n    navigator.clipboard.writeText(JSON.stringify(config)) // кладем конфиг в буффер обмена\r\n    .then(() => {\r\n/*       props.showNotification('<b>настройки скопированы в буфер как JSON</b>')\r\n      setTimeout(props.hideNotification, 500) */\r\n    })\r\n    .catch(() => {\r\n/*         props.showNotification('что-то пошло не так')\r\n        setTimeout(props.hideNotification, 500) */\r\n    });\r\n  };",["61","62"],{"ruleId":"63","replacedBy":"64"},{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","severity":1,"message":"68","line":2,"column":8,"nodeType":"69","messageId":"70","endLine":2,"endColumn":19},{"ruleId":"71","severity":1,"message":"72","line":39,"column":32,"nodeType":"73","messageId":"74","endLine":39,"endColumn":34},{"ruleId":"75","severity":1,"message":"76","line":47,"column":7,"nodeType":"77","endLine":47,"endColumn":15,"suggestions":"78"},{"ruleId":"67","severity":1,"message":"79","line":1,"column":8,"nodeType":"69","messageId":"70","endLine":1,"endColumn":13},{"ruleId":"67","severity":1,"message":"68","line":2,"column":8,"nodeType":"69","messageId":"70","endLine":2,"endColumn":19},{"ruleId":"63","replacedBy":"80"},{"ruleId":"65","replacedBy":"81"},"no-native-reassign",["82"],"no-negated-in-lhs",["83"],"no-unused-vars","'html2canvas' is defined but never used.","Identifier","unusedVar","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'image' and 'underlayColorCreator'. Either include them or remove the dependency array.","ArrayExpression",["84"],"'React' is defined but never used.",["82"],["83"],"no-global-assign","no-unsafe-negation",{"desc":"85","fix":"86"},"Update the dependencies array to be: [image, params, underlayColorCreator]",{"range":"87","text":"88"},[1645,1653],"[image, params, underlayColorCreator]"]